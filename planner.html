<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Planner - Our Schedule</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Righteous&family=Poppins:wght@300;400;600;700&display=swap');
    
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body { 
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
      color: #fff;
    }
    
    .container {
      max-width: 1400px;
      margin: 0 auto;
    }
    
    header {
      text-align: center;
      margin-bottom: 30px;
    }
    
    h1 {
      font-family: 'Righteous', cursive;
      font-size: 3em;
      margin-bottom: 10px;
      text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
    }
    
    .planner-grid {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 20px;
    }
    
    .calendar-section, .todos-section {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      color: #333;
    }
    
    .section-title {
      font-family: 'Righteous', cursive;
      font-size: 1.8em;
      margin-bottom: 20px;
      color: #667eea;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    /* Calendar */
    .calendar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    
    .calendar-header h2 {
      font-size: 1.5em;
      color: #667eea;
    }
    
    .calendar-nav {
      display: flex;
      gap: 10px;
    }
    
    .nav-btn {
      padding: 8px 16px;
      background: #667eea;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s;
    }
    
    .nav-btn:hover {
      background: #764ba2;
      transform: translateY(-2px);
    }
    
    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 10px;
    }
    
    .day-label {
      text-align: center;
      font-weight: 600;
      padding: 10px;
      color: #667eea;
    }
    
    .calendar-day {
      aspect-ratio: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 10px;
      background: #f5f5f5;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.2s;
      position: relative;
    }
    
    .calendar-day:hover {
      background: #e0e0e0;
      transform: scale(1.05);
    }
    
    .calendar-day.other-month {
      opacity: 0.3;
    }
    
    .calendar-day.today {
      background: #667eea;
      color: white;
      font-weight: 700;
    }
    
    .calendar-day.selected {
      background: #764ba2;
      color: white;
    }
    
    .calendar-day.has-event::after {
      content: '‚óè';
      position: absolute;
      bottom: 5px;
      color: #f5576c;
      font-size: 0.8em;
    }
    
    .event-indicator {
      font-size: 0.7em;
      margin-top: 5px;
      color: #f5576c;
    }
    
    /* Events Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }
    
    .modal.active {
      display: flex;
    }
    
    .modal-content {
      background: white;
      border-radius: 20px;
      padding: 30px;
      max-width: 500px;
      width: 90%;
      color: #333;
    }
    
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    
    .modal-header h3 {
      font-size: 1.5em;
      color: #667eea;
    }
    
    .close-modal {
      cursor: pointer;
      font-size: 1.5em;
      color: #999;
    }
    
    .close-modal:hover {
      color: #333;
    }
    
    .event-form {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    
    .event-form input, .event-form textarea {
      padding: 12px;
      border: 2px solid #ddd;
      border-radius: 10px;
      font-family: 'Poppins', sans-serif;
      font-size: 1em;
      outline: none;
    }
    
    .event-form input:focus, .event-form textarea:focus {
      border-color: #667eea;
    }
    
    .event-form button {
      padding: 12px;
      background: #667eea;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 600;
      font-size: 1em;
      transition: all 0.3s;
    }
    
    .event-form button:hover {
      background: #764ba2;
    }
    
    .events-list {
      max-height: 300px;
      overflow-y: auto;
    }
    
    .event-item {
      padding: 15px;
      background: #f5f5f5;
      border-radius: 10px;
      margin-bottom: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .event-info {
      flex: 1;
    }
    
    .event-title {
      font-weight: 600;
      font-size: 1.1em;
      margin-bottom: 5px;
    }
    
    .event-time {
      font-size: 0.9em;
      color: #666;
    }
    
    .event-description {
      font-size: 0.9em;
      margin-top: 5px;
      color: #777;
    }
    
    .event-author {
      font-size: 0.8em;
      color: #999;
      margin-top: 5px;
    }
    
    .delete-event {
      cursor: pointer;
      color: #e74c3c;
      font-size: 1.2em;
      padding: 5px 10px;
    }
    
    /* To-Do Lists */
    .todo-tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }
    
    .todo-tab {
      flex: 1;
      padding: 10px;
      background: #f5f5f5;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s;
    }
    
    .todo-tab.active {
      background: #667eea;
      color: white;
    }
    
    .todo-input-area {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }
    
    .todo-input-area input {
      flex: 1;
      padding: 12px;
      border: 2px solid #ddd;
      border-radius: 10px;
      font-family: 'Poppins', sans-serif;
      font-size: 1em;
      outline: none;
    }
    
    .todo-input-area input:focus {
      border-color: #667eea;
    }
    
    .todo-input-area button {
      padding: 12px 20px;
      background: #667eea;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s;
    }
    
    .todo-input-area button:hover {
      background: #764ba2;
    }
    
    .todos-list {
      max-height: 500px;
      overflow-y: auto;
    }
    
    .todo-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 12px;
      background: #f5f5f5;
      border-radius: 10px;
      margin-bottom: 10px;
      transition: all 0.2s;
    }
    
    .todo-item:hover {
      background: #e0e0e0;
    }
    
    .todo-item.completed {
      opacity: 0.6;
    }
    
    .todo-item.completed .todo-text {
      text-decoration: line-through;
    }
    
    .todo-checkbox {
      width: 24px;
      height: 24px;
      cursor: pointer;
    }
    
    .todo-text {
      flex: 1;
      font-size: 1em;
    }
    
    .todo-author {
      font-size: 0.8em;
      color: #999;
    }
    
    .delete-todo {
      cursor: pointer;
      color: #e74c3c;
      font-size: 1.2em;
      padding: 5px;
    }
    
    .back-btn {
      display: inline-block;
      padding: 10px 20px;
      background: rgba(255,255,255,0.2);
      color: white;
      text-decoration: none;
      border-radius: 10px;
      margin-bottom: 20px;
      transition: all 0.3s;
    }
    
    .back-btn:hover {
      background: rgba(255,255,255,0.3);
      transform: translateY(-2px);
    }
    
    @media (max-width: 1000px) {
      .planner-grid {
        grid-template-columns: 1fr;
      }
    }
    
    @media (max-width: 600px) {
      h1 { font-size: 2em; }
      .calendar-day { font-size: 0.9em; }
    }
  </style>
</head>
<body>

  <div class="container">
    <a href="index.html" class="back-btn">‚Üê Back to Hub</a>
    
    <header>
      <h1>üìÖ OUR PLANNER</h1>
    </header>
    
    <div class="planner-grid">
      <!-- Calendar Section -->
      <div class="calendar-section">
        <div class="section-title">
          üìÜ Calendar
        </div>
        
        <div class="calendar-header">
          <h2 id="current-month"></h2>
          <div class="calendar-nav">
            <button class="nav-btn" onclick="previousMonth()">‚Üê</button>
            <button class="nav-btn" onclick="today()">Today</button>
            <button class="nav-btn" onclick="nextMonth()">‚Üí</button>
          </div>
        </div>
        
        <div class="calendar-grid">
          <div class="day-label">Sun</div>
          <div class="day-label">Mon</div>
          <div class="day-label">Tue</div>
          <div class="day-label">Wed</div>
          <div class="day-label">Thu</div>
          <div class="day-label">Fri</div>
          <div class="day-label">Sat</div>
          <div id="calendar-days"></div>
        </div>
      </div>
      
      <!-- To-Do Section -->
      <div class="todos-section">
        <div class="section-title">
          ‚úì To-Do Lists
        </div>
        
        <div class="todo-tabs">
          <button class="todo-tab active" data-list="shared">Shared</button>
          <button class="todo-tab" data-list="mburu">Mburu</button>
          <button class="todo-tab" data-list="gatete">Gatete</button>
        </div>
        
        <div class="todo-input-area">
          <input type="text" id="todo-input" placeholder="Add a task...">
          <button onclick="addTodo()">+</button>
        </div>
        
        <div class="todos-list" id="todos-list"></div>
      </div>
    </div>
  </div>

  <!-- Event Modal -->
  <div class="modal" id="event-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Events for <span id="modal-date"></span></h3>
        <span class="close-modal" onclick="closeModal()">√ó</span>
      </div>
      
      <div class="event-form">
        <input type="text" id="event-title" placeholder="Event title">
        <input type="time" id="event-time">
        <textarea id="event-description" rows="3" placeholder="Description (optional)"></textarea>
        <button onclick="addEvent()">Add Event</button>
      </div>
      
      <div class="events-list" id="events-list"></div>
    </div>
  </div>

  <script>
    const currentUser = localStorage.getItem('currentUser') || 'Guest';
    
    let currentDate = new Date();
    let selectedDate = null;
    let events = JSON.parse(localStorage.getItem('plannerEvents')) || [];
    let todos = JSON.parse(localStorage.getItem('plannerTodos')) || {
      shared: [],
      mburu: [],
      gatete: []
    };
    let currentTodoList = 'shared';
    
    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      renderCalendar();
      loadTodos();
      
      // Todo tabs
      document.querySelectorAll('.todo-tab').forEach(tab => {
        tab.addEventListener('click', () => {
          document.querySelectorAll('.todo-tab').forEach(t => t.classList.remove('active'));
          tab.classList.add('active');
          currentTodoList = tab.dataset.list;
          loadTodos();
        });
      });
      
      // Enter key for todo input
      document.getElementById('todo-input').addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
          addTodo();
        }
      });
    });
    
    // Calendar Functions
    function renderCalendar() {
      const year = currentDate.getFullYear();
      const month = currentDate.getMonth();
      
      document.getElementById('current-month').textContent = 
        new Date(year, month).toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
      
      const firstDay = new Date(year, month, 1).getDay();
      const daysInMonth = new Date(year, month + 1, 0).getDate();
      const daysInPrevMonth = new Date(year, month, 0).getDate();
      
      const daysContainer = document.getElementById('calendar-days');
      daysContainer.innerHTML = '';
      
      const today = new Date();
      const isCurrentMonth = year === today.getFullYear() && month === today.getMonth();
      
      // Previous month days
      for (let i = firstDay - 1; i >= 0; i--) {
        const day = daysInPrevMonth - i;
        const dayEl = createDayElement(day, true, year, month - 1);
        daysContainer.appendChild(dayEl);
      }
      
      // Current month days
      for (let day = 1; day <= daysInMonth; day++) {
        const dayEl = createDayElement(day, false, year, month);
        
        if (isCurrentMonth && day === today.getDate()) {
          dayEl.classList.add('today');
        }
        
        // Check for events
        const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
        const hasEvent = events.some(e => e.date === dateStr);
        if (hasEvent) {
          dayEl.classList.add('has-event');
        }
        
        daysContainer.appendChild(dayEl);
      }
      
      // Next month days
      const totalCells = daysContainer.children.length;
      const remainingCells = 35 - totalCells;
      for (let day = 1; day <= remainingCells; day++) {
        const dayEl = createDayElement(day, true, year, month + 1);
        daysContainer.appendChild(dayEl);
      }
    }
    
    function createDayElement(day, isOtherMonth, year, month) {
      const dayEl = document.createElement('div');
      dayEl.className = 'calendar-day';
      dayEl.textContent = day;
      
      if (isOtherMonth) {
        dayEl.classList.add('other-month');
      }
      
      dayEl.addEventListener('click', () => {
        const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
        openEventModal(dateStr);
      });
      
      return dayEl;
    }
    
    function previousMonth() {
      currentDate.setMonth(currentDate.getMonth() - 1);
      renderCalendar();
    }
    
    function nextMonth() {
      currentDate.setMonth(currentDate.getMonth() + 1);
      renderCalendar();
    }
    
    function today() {
      currentDate = new Date();
      renderCalendar();
    }
    
    // Event Modal Functions
    function openEventModal(date) {
      selectedDate = date;
      const dateObj = new Date(date + 'T00:00:00');
      document.getElementById('modal-date').textContent = 
        dateObj.toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' });
      
      loadEvents();
      document.getElementById('event-modal').classList.add('active');
    }
    
    function closeModal() {
      document.getElementById('event-modal').classList.remove('active');
      document.getElementById('event-title').value = '';
      document.getElementById('event-time').value = '';
      document.getElementById('event-description').value = '';
    }
    
    function addEvent() {
      const title = document.getElementById('event-title').value.trim();
      const time = document.getElementById('event-time').value;
      const description = document.getElementById('event-description').value.trim();
      
      if (!title) return;
      
      const event = {
        id: Date.now(),
        date: selectedDate,
        title: title,
        time: time,
        description: description,
        author: currentUser,
        timestamp: new Date().toISOString()
      };
      
      events.push(event);
      saveEvents();
      loadEvents();
      renderCalendar();
      
      document.getElementById('event-title').value = '';
      document.getElementById('event-time').value = '';
      document.getElementById('event-description').value = '';
    }
    
    function loadEvents() {
      const dateEvents = events.filter(e => e.date === selectedDate);
      const list = document.getElementById('events-list');
      list.innerHTML = '';
      
      if (dateEvents.length === 0) {
        list.innerHTML = '<p style="text-align: center; color: #999; padding: 20px;">No events for this day</p>';
        return;
      }
      
      dateEvents.sort((a, b) => (a.time || '').localeCompare(b.time || ''));
      
      dateEvents.forEach(event => {
        const eventEl = document.createElement('div');
        eventEl.className = 'event-item';
        
        eventEl.innerHTML = `
          <div class="event-info">
            <div class="event-title">${event.title}</div>
            ${event.time ? `<div class="event-time">‚è∞ ${event.time}</div>` : ''}
            ${event.description ? `<div class="event-description">${event.description}</div>` : ''}
            <div class="event-author">Added by ${event.author}</div>
          </div>
          <span class="delete-event" onclick="deleteEvent(${event.id})">üóëÔ∏è</span>
        `;
        
        list.appendChild(eventEl);
      });
    }
    
    function deleteEvent(id) {
      if (confirm('Delete this event?')) {
        events = events.filter(e => e.id !== id);
        saveEvents();
        loadEvents();
        renderCalendar();
      }
    }
    
    function saveEvents() {
      localStorage.setItem('plannerEvents', JSON.stringify(events));
    }
    
    // To-Do Functions
    function addTodo() {
      const input = document.getElementById('todo-input');
      const text = input.value.trim();
      
      if (!text) return;
      
      const todo = {
        id: Date.now(),
        text: text,
        completed: false,
        author: currentUser,
        timestamp: new Date().toISOString()
      };
      
      todos[currentTodoList].push(todo);
      saveTodos();
      input.value = '';
      loadTodos();
    }
    
    function loadTodos() {
      const list = document.getElementById('todos-list');
      list.innerHTML = '';
      
      const currentTodos = todos[currentTodoList] || [];
      
      if (currentTodos.length === 0) {
        list.innerHTML = '<p style="text-align: center; color: #999; padding: 20px;">No tasks yet</p>';
        return;
      }
      
      currentTodos.forEach(todo => {
        const todoEl = document.createElement('div');
        todoEl.className = `todo-item ${todo.completed ? 'completed' : ''}`;
        
        todoEl.innerHTML = `
          <input type="checkbox" class="todo-checkbox" ${todo.completed ? 'checked' : ''} 
                 onchange="toggleTodo(${todo.id})">
          <span class="todo-text">${todo.text}</span>
          <span class="todo-author">${todo.author}</span>
          <span class="delete-todo" onclick="deleteTodo(${todo.id})">üóëÔ∏è</span>
        `;
        
        list.appendChild(todoEl);
      });
    }
    
    function toggleTodo(id) {
      const todo = todos[currentTodoList].find(t => t.id === id);
      if (todo) {
        todo.completed = !todo.completed;
        saveTodos();
        loadTodos();
      }
    }
    
    function deleteTodo(id) {
      todos[currentTodoList] = todos[currentTodoList].filter(t => t.id !== id);
      saveTodos();
      loadTodos();
    }
    
    function saveTodos() {
      localStorage.setItem('plannerTodos', JSON.stringify(todos));
    }
  </script>
</body>
</html>
