<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tic-Tac-Toe</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Fredoka+One&family=Quicksand:wght@400;600;700&display=swap');
    
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body { 
      font-family: 'Quicksand', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      color: #fff;
    }
    
    .container {
      max-width: 550px;
      width: 100%;
      text-align: center;
    }
    
    h1 {
      font-family: 'Fredoka One', cursive;
      font-size: 4em;
      margin-bottom: 10px;
      text-shadow: 4px 4px 0 rgba(0,0,0,0.2);
      animation: bounce 2s ease-in-out infinite;
    }
    
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    
    .subtitle {
      font-size: 1.2em;
      margin-bottom: 30px;
      opacity: 0.9;
      font-weight: 600;
    }
    
    #board {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 15px;
      margin: 30px auto;
      max-width: 450px;
      padding: 20px;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }
    
    .cell {
      aspect-ratio: 1;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 15px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Fredoka One', cursive;
      font-size: 4em;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      position: relative;
      overflow: hidden;
    }
    
    .cell::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, transparent, rgba(255,255,255,0.3));
      opacity: 0;
      transition: opacity 0.3s;
    }
    
    .cell:hover:not(.taken)::before {
      opacity: 1;
    }
    
    .cell:hover:not(.taken) {
      transform: scale(1.05);
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    }
    
    .cell.taken {
      cursor: not-allowed;
    }
    
    .cell.x {
      color: #e74c3c;
      animation: pop 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }
    
    .cell.o {
      color: #3498db;
      animation: pop 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }
    
    @keyframes pop {
      0% { transform: scale(0); opacity: 0; }
      50% { transform: scale(1.2); }
      100% { transform: scale(1); opacity: 1; }
    }
    
    .cell.winner {
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      color: white !important;
      animation: celebrate 0.6s ease-in-out;
    }
    
    @keyframes celebrate {
      0%, 100% { transform: scale(1); }
      25% { transform: scale(1.1) rotate(-5deg); }
      75% { transform: scale(1.1) rotate(5deg); }
    }
    
    #status {
      font-size: 1.8em;
      font-weight: 700;
      margin: 25px 0;
      padding: 15px 30px;
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
      border-radius: 50px;
      display: inline-block;
      box-shadow: 0 5px 20px rgba(0,0,0,0.2);
      min-width: 280px;
    }
    
    .controls {
      display: flex;
      flex-direction: column;
      gap: 15px;
      margin-top: 25px;
    }
    
    .mode-selector {
      display: flex;
      gap: 10px;
      justify-content: center;
    }
    
    .mode-btn {
      flex: 1;
      padding: 14px 20px;
      font-family: 'Quicksand', sans-serif;
      font-size: 1.1em;
      font-weight: 700;
      cursor: pointer;
      background: rgba(255, 255, 255, 0.2);
      color: white;
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-radius: 15px;
      transition: all 0.3s;
    }
    
    .mode-btn:hover {
      background: rgba(255, 255, 255, 0.3);
      transform: translateY(-2px);
    }
    
    .mode-btn.active {
      background: rgba(255, 255, 255, 0.95);
      color: #667eea;
      border-color: transparent;
      box-shadow: 0 5px 20px rgba(255,255,255,0.3);
    }
    
    .difficulty-selector {
      display: flex;
      gap: 10px;
      justify-content: center;
    }
    
    .diff-btn {
      flex: 1;
      padding: 12px 16px;
      font-family: 'Quicksand', sans-serif;
      font-size: 0.95em;
      font-weight: 600;
      cursor: pointer;
      background: rgba(255, 255, 255, 0.15);
      color: white;
      border: 2px solid rgba(255, 255, 255, 0.2);
      border-radius: 12px;
      transition: all 0.3s;
    }
    
    .diff-btn:hover {
      background: rgba(255, 255, 255, 0.25);
    }
    
    .diff-btn.active {
      background: rgba(46, 204, 113, 0.8);
      border-color: #27ae60;
      box-shadow: 0 5px 15px rgba(46, 204, 113, 0.4);
    }
    
    .action-buttons {
      display: flex;
      gap: 10px;
      justify-content: center;
    }
    
    button {
      padding: 14px 30px;
      font-family: 'Quicksand', sans-serif;
      font-size: 1.1em;
      font-weight: 700;
      cursor: pointer;
      background: rgba(255, 255, 255, 0.95);
      color: #667eea;
      border: none;
      border-radius: 50px;
      transition: all 0.3s;
      box-shadow: 0 5px 20px rgba(0,0,0,0.2);
    }
    
    button:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 30px rgba(0,0,0,0.3);
    }
    
    .stats {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 25px;
      font-weight: 600;
      font-size: 1.1em;
    }
    
    .stat-item {
      padding: 10px 20px;
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(10px);
      border-radius: 12px;
      border: 2px solid rgba(255, 255, 255, 0.2);
    }
    
    .stat-label {
      font-size: 0.8em;
      opacity: 0.8;
      display: block;
    }
    
    .stat-value {
      font-size: 1.4em;
      font-weight: 700;
      display: block;
      margin-top: 5px;
    }
    
    @media (max-width: 600px) {
      h1 { font-size: 2.5em; }
      .cell { font-size: 3em; }
      #status { font-size: 1.4em; }
      .mode-selector, .difficulty-selector, .action-buttons {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>

  <div class="container">
    <h1>TIC-TAC-TOE</h1>
    <p class="subtitle">Classic game, modern style!</p>
    
    <div id="status">X's Turn</div>
    
    <div id="board">
      <div class="cell" data-index="0"></div>
      <div class="cell" data-index="1"></div>
      <div class="cell" data-index="2"></div>
      <div class="cell" data-index="3"></div>
      <div class="cell" data-index="4"></div>
      <div class="cell" data-index="5"></div>
      <div class="cell" data-index="6"></div>
      <div class="cell" data-index="7"></div>
      <div class="cell" data-index="8"></div>
    </div>
    
    <div class="controls">
      <div class="mode-selector">
        <button class="mode-btn active" data-mode="ai">ü§ñ vs AI</button>
        <button class="mode-btn" data-mode="2player">üë• 2 Player</button>
      </div>
      
      <div class="difficulty-selector" id="difficultySelector">
        <button class="diff-btn" data-level="easy">üòä Easy</button>
        <button class="diff-btn active" data-level="medium">üòê Medium</button>
        <button class="diff-btn" data-level="impossible">üòà Impossible</button>
      </div>
      
      <div class="action-buttons">
        <button id="newGame">üîÑ New Game</button>
        <button id="resetStats">üìä Reset Stats</button>
      </div>
    </div>
    
    <div class="stats">
      <div class="stat-item">
        <span class="stat-label">X Wins</span>
        <span class="stat-value" id="xWins">0</span>
      </div>
      <div class="stat-item">
        <span class="stat-label">Draws</span>
        <span class="stat-value" id="draws">0</span>
      </div>
      <div class="stat-item">
        <span class="stat-label">O Wins</span>
        <span class="stat-value" id="oWins">0</span>
      </div>
    </div>
  </div>

  <script>
    const cells = document.querySelectorAll('.cell');
    const statusEl = document.getElementById('status');
    const difficultySelector = document.getElementById('difficultySelector');
    const xWinsEl = document.getElementById('xWins');
    const oWinsEl = document.getElementById('oWins');
    const drawsEl = document.getElementById('draws');
    
    let board = ['', '', '', '', '', '', '', '', ''];
    let currentPlayer = 'X';
    let gameMode = 'ai';
    let difficulty = 'medium';
    let gameActive = true;
    let stats = { xWins: 0, oWins: 0, draws: 0 };
    
    const winPatterns = [
      [0, 1, 2], [3, 4, 5], [6, 7, 8], // Rows
      [0, 3, 6], [1, 4, 7], [2, 5, 8], // Columns
      [0, 4, 8], [2, 4, 6]             // Diagonals
    ];

    function init() {
      cells.forEach(cell => {
        cell.addEventListener('click', handleCellClick);
      });
      
      document.querySelectorAll('.mode-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
          document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          gameMode = btn.dataset.mode;
          difficultySelector.style.display = gameMode === 'ai' ? 'flex' : 'none';
          resetGame();
        });
      });
      
      document.querySelectorAll('.diff-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
          document.querySelectorAll('.diff-btn').forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          difficulty = btn.dataset.level;
          resetGame();
        });
      });
      
      document.getElementById('newGame').addEventListener('click', resetGame);
      document.getElementById('resetStats').addEventListener('click', () => {
        stats = { xWins: 0, oWins: 0, draws: 0 };
        updateStats();
      });
      
      loadStats();
      updateStats();
    }

    function handleCellClick(e) {
      const index = e.target.dataset.index;
      
      if (board[index] !== '' || !gameActive) return;
      if (gameMode === 'ai' && currentPlayer === 'O') return;
      
      makeMove(index, currentPlayer);
      
      if (gameActive && gameMode === 'ai' && currentPlayer === 'O') {
        setTimeout(aiMove, 500);
      }
    }

    function makeMove(index, player) {
      board[index] = player;
      cells[index].textContent = player;
      cells[index].classList.add(player.toLowerCase(), 'taken');
      
      if (checkWin(player)) {
        endGame(`${player} Wins! üéâ`);
        highlightWinner(player);
        stats[player === 'X' ? 'xWins' : 'oWins']++;
        updateStats();
        saveStats();
      } else if (board.every(cell => cell !== '')) {
        endGame("It's a Draw! ü§ù");
        stats.draws++;
        updateStats();
        saveStats();
      } else {
        currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
        updateStatus();
      }
    }

    function aiMove() {
      let index;
      
      if (difficulty === 'easy') {
        index = getRandomMove();
      } else if (difficulty === 'medium') {
        // 50% optimal, 50% random
        index = Math.random() < 0.5 ? getBestMove() : getRandomMove();
      } else {
        // Impossible - always optimal
        index = getBestMove();
      }
      
      makeMove(index, 'O');
    }

    function getRandomMove() {
      const available = board.map((cell, i) => cell === '' ? i : null).filter(i => i !== null);
      return available[Math.floor(Math.random() * available.length)];
    }

    function getBestMove() {
      let bestScore = -Infinity;
      let bestMove = 0;
      
      for (let i = 0; i < 9; i++) {
        if (board[i] === '') {
          board[i] = 'O';
          let score = minimax(board, 0, false);
          board[i] = '';
          
          if (score > bestScore) {
            bestScore = score;
            bestMove = i;
          }
        }
      }
      
      return bestMove;
    }

    function minimax(newBoard, depth, isMaximizing) {
      if (checkWin('O')) return 10 - depth;
      if (checkWin('X')) return depth - 10;
      if (newBoard.every(cell => cell !== '')) return 0;
      
      if (isMaximizing) {
        let bestScore = -Infinity;
        for (let i = 0; i < 9; i++) {
          if (newBoard[i] === '') {
            newBoard[i] = 'O';
            let score = minimax(newBoard, depth + 1, false);
            newBoard[i] = '';
            bestScore = Math.max(score, bestScore);
          }
        }
        return bestScore;
      } else {
        let bestScore = Infinity;
        for (let i = 0; i < 9; i++) {
          if (newBoard[i] === '') {
            newBoard[i] = 'X';
            let score = minimax(newBoard, depth + 1, true);
            newBoard[i] = '';
            bestScore = Math.min(score, bestScore);
          }
        }
        return bestScore;
      }
    }

    function checkWin(player) {
      return winPatterns.some(pattern => {
        return pattern.every(index => board[index] === player);
      });
    }

    function highlightWinner(player) {
      winPatterns.forEach(pattern => {
        if (pattern.every(index => board[index] === player)) {
          pattern.forEach(index => cells[index].classList.add('winner'));
        }
      });
    }

    function endGame(message) {
      gameActive = false;
      statusEl.textContent = message;
    }

    function updateStatus() {
      if (gameActive) {
        const playerName = gameMode === 'ai' && currentPlayer === 'O' ? "AI" : currentPlayer;
        statusEl.textContent = `${playerName}'s Turn`;
      }
    }

    function resetGame() {
      board = ['', '', '', '', '', '', '', '', ''];
      currentPlayer = 'X';
      gameActive = true;
      
      cells.forEach(cell => {
        cell.textContent = '';
        cell.className = 'cell';
      });
      
      updateStatus();
    }

    function updateStats() {
      xWinsEl.textContent = stats.xWins;
      oWinsEl.textContent = stats.oWins;
      drawsEl.textContent = stats.draws;
    }

    function saveStats() {
      localStorage.setItem('tttStats', JSON.stringify(stats));
    }

    function loadStats() {
      const saved = localStorage.getItem('tttStats');
      if (saved) {
        stats = JSON.parse(saved);
      }
    }

    init();
  </script>
</body>
</html>
